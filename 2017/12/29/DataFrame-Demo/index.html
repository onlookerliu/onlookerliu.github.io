<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="DataFrame_Demo"><meta name="keywords" content="julia"><meta name="author" content="Monad Kai,undefined"><meta name="copyright" content="Monad Kai"><title>DataFrame_Demo | Code@浮生记</title><link rel="shortcut icon" href="../../../../favicon.ico"><link rel="stylesheet" href="../../../../css/index.css"><link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.min.css?version=1.5.3"><link rel="dns-prefetch" href="https://cdn.staticfile.org"><link rel="dns-prefetch" href="https://cdn.bootcss.com"><link rel="dns-prefetch" href="https://creativecommons.org"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  localSearch: undefined
} </script></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar"><div class="toggle-sidebar-info text-center"><span data-toggle="切换文章详情">切换站点概览</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#DataFrames"><span class="toc-number">1.</span> <span class="toc-text">DataFrames</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Transformation-Mapping"><span class="toc-number">1.1.</span> <span class="toc-text">Transformation Mapping</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Map-the-Columns-to-Transformations"><span class="toc-number">1.1.1.</span> <span class="toc-text">Map the Columns to Transformations</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Test-the-Transformation"><span class="toc-number">1.1.2.</span> <span class="toc-text">Test the Transformation</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Transform-Multiple-Columns"><span class="toc-number">1.1.3.</span> <span class="toc-text">Transform Multiple Columns</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Multiple-transformers-for-the-same-column"><span class="toc-number">1.1.4.</span> <span class="toc-text">Multiple transformers for the same column</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Columns-that-don’t-need-any-transformation"><span class="toc-number">1.1.5.</span> <span class="toc-text">Columns that don’t need any transformation</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Cross-validation"><span class="toc-number">1.2.</span> <span class="toc-text">Cross-validation</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Iris-Dataset"><span class="toc-number">1.3.</span> <span class="toc-text">Iris Dataset</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Parameters"><span class="toc-number">1.4.</span> <span class="toc-text">Parameters</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Examples"><span class="toc-number">1.5.</span> <span class="toc-text">Examples</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Attributes"><span class="toc-number">1.6.</span> <span class="toc-text">Attributes</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Notes"><span class="toc-number">1.7.</span> <span class="toc-text">Notes</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#See-Also"><span class="toc-number">1.8.</span> <span class="toc-text">See Also</span></a></li></ol></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="../../../../img/avatar.png"></div><div class="author-info__name text-center">Monad Kai</div><div class="author-info__description text-center">Life is beautiful!</div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="../../../../archives"><span class="pull-left">文章</span><span class="pull-right">84</span></a><a class="author-info-articles__tags article-meta" href="../../../../tags"><span class="pull-left">标签</span><span class="pull-right">20</span></a></div></div></div><div id="content-outer"><div class="no-bg" id="top-container" style="background-image: url(true)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">Code@浮生记</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus"><a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a></span></div><div id="post-info"><div id="post-title">DataFrame_Demo</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2017-12-29</time></div></div></div><div class="layout" id="content-inner"><article id="post"><div id="post-content"><p>Credits: this code and documentation was adapted from Paul Butler’s <a href="https://github.com/paulgb/sklearn-pandas" target="_blank" rel="noopener">sklearn-pandas</a></p>
<a id="more"></a>
<h1 id="DataFrames"><a href="#DataFrames" class="headerlink" title="DataFrames"></a>DataFrames</h1><p>It is possible to use a dataframe as a training set, but it needs to be converted to an array first. <code>DataFrameMapper</code> is used to specify how this conversion proceeds. For example, PCA might be applied to some numerical dataframe columns, and one-hot-encoding to a categorical column.</p>
<h2 id="Transformation-Mapping"><a href="#Transformation-Mapping" class="headerlink" title="Transformation Mapping"></a>Transformation Mapping</h2><p>Consider this dataset:</p>
<figure class="highlight julia"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> ScikitLearn</span><br><span class="line"><span class="keyword">using</span> DataFrames: DataFrame, NA, DataArray</span><br><span class="line"><span class="keyword">using</span> DataArrays: <span class="meta">@data</span></span><br><span class="line"><span class="meta">@sk_import</span> preprocessing: (LabelBinarizer, StandardScaler)</span><br><span class="line"></span><br><span class="line">data = DataFrame(pet=[<span class="string">"cat"</span>, <span class="string">"dog"</span>, <span class="string">"dog"</span>, <span class="string">"fish"</span>, <span class="string">"cat"</span>, <span class="string">"dog"</span>, <span class="string">"cat"</span>, <span class="string">"fish"</span>],</span><br><span class="line">                 children=[<span class="number">4.</span>, <span class="number">6</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">4</span>],</span><br><span class="line">                 salary=[<span class="number">90</span>, <span class="number">24</span>, <span class="number">44</span>, <span class="number">27</span>, <span class="number">32</span>, <span class="number">59</span>, <span class="number">36</span>, <span class="number">27</span>])</span><br></pre></td></tr></table></figure>
<table class="data-frame"><tr><th></th><th>pet</th><th>children</th><th>salary</th></tr><tr><th>1</th><td>cat</td><td>4.0</td><td>90</td></tr><tr><th>2</th><td>dog</td><td>6.0</td><td>24</td></tr><tr><th>3</th><td>dog</td><td>3.0</td><td>44</td></tr><tr><th>4</th><td>fish</td><td>3.0</td><td>27</td></tr><tr><th>5</th><td>cat</td><td>2.0</td><td>32</td></tr><tr><th>6</th><td>dog</td><td>3.0</td><td>59</td></tr><tr><th>7</th><td>cat</td><td>5.0</td><td>36</td></tr><tr><th>8</th><td>fish</td><td>4.0</td><td>27</td></tr></table>



<h3 id="Map-the-Columns-to-Transformations"><a href="#Map-the-Columns-to-Transformations" class="headerlink" title="Map the Columns to Transformations"></a>Map the Columns to Transformations</h3><p>The mapper takes a list of pairs. The first is a column name from the DataFrame, or a list containing one or multiple columns (we will see an example with multiple columns later). The second is an object which will perform the transformation which will be applied to that column:</p>
<p>Note: <code>ScikitLearn.DataFrameMapper</code> won’t be available until <code>DataFrames</code> is imported</p>
<figure class="highlight julia"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mapper = DataFrameMapper([(:pet, LabelBinarizer()),</span><br><span class="line">                          ([:children], StandardScaler())]);</span><br></pre></td></tr></table></figure>
<p>The difference between specifying the column selector as :column (as a single symbol) and [:column] (as a list with one element) is the shape of the array that is passed to the transformer. In the first case, a one dimensional array with be passed, while in the second case it will be a 2-dimensional array with one column, i.e. a column vector.</p>
<h3 id="Test-the-Transformation"><a href="#Test-the-Transformation" class="headerlink" title="Test the Transformation"></a>Test the Transformation</h3><p>We can use the <code>fit_transform!</code> shortcut to both fit the model and see what transformed data looks like. In this and the other examples, output is rounded to two digits with <code>round</code> to account for rounding errors on different hardware:</p>
<figure class="highlight julia"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">round(fit_transform!(mapper, copy(data)), <span class="number">2</span>)</span><br></pre></td></tr></table></figure>
<pre><code>8x4 Array{Float64,2}:
 1.0  0.0  0.0   0.21
 0.0  1.0  0.0   1.88
 0.0  1.0  0.0  -0.63
 0.0  0.0  1.0  -0.63
 1.0  0.0  0.0  -1.46
 0.0  1.0  0.0  -0.63
 1.0  0.0  0.0   1.04
 0.0  0.0  1.0   0.21
</code></pre><p>Note that the first three columns are the output of the LabelBinarizer (corresponding to <code>cat</code>, <code>dog</code>, and <code>fish</code><br> respectively) and the fourth column is the standardized value for the number of children. In general, the columns are ordered according to the order given when the DataFrameMapper is constructed.</p>
<p>Now that the transformation is trained, we confirm that it works on new data:</p>
<figure class="highlight julia"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sample = DataFrame(pet= [<span class="string">"cat"</span>], children= [<span class="number">5.</span>])</span><br><span class="line">round(transform(mapper, sample), <span class="number">2</span>)</span><br></pre></td></tr></table></figure>
<pre><code>1x4 Array{Float64,2}:
 1.0  0.0  0.0  1.04
</code></pre><h3 id="Transform-Multiple-Columns"><a href="#Transform-Multiple-Columns" class="headerlink" title="Transform Multiple Columns"></a>Transform Multiple Columns</h3><p>Transformations may require multiple input columns. In these cases, the column names can be specified in a list:</p>
<figure class="highlight julia"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@sk_import</span> decomposition: PCA</span><br><span class="line">mapper2 = DataFrameMapper([([:children, :salary], PCA(<span class="number">1</span>))]);</span><br></pre></td></tr></table></figure>
<p>Now running <code>fit_transform!</code> will run PCA on the <code>children</code> and <code>salary</code> columns and return the first principal component:</p>
<figure class="highlight julia"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">round(fit_transform!(mapper2, copy(data)), <span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<pre><code>8x1 Array{Float64,2}:
  47.6
 -18.4
   1.6
 -15.4
 -10.4
  16.6
  -6.4
 -15.4
</code></pre><h3 id="Multiple-transformers-for-the-same-column"><a href="#Multiple-transformers-for-the-same-column" class="headerlink" title="Multiple transformers for the same column"></a>Multiple transformers for the same column</h3><p>Multiple transformers can be applied to the same column specifying them in a list:</p>
<figure class="highlight julia"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@sk_import</span> preprocessing: Imputer</span><br><span class="line">mapper3 = DataFrameMapper([([:age], [Imputer()])]; NA2NaN=<span class="literal">true</span>)</span><br><span class="line">data_3 = DataFrame(age= <span class="meta">@data</span>([<span class="number">1</span>, NA, <span class="number">3</span>]))</span><br><span class="line">fit_transform!(mapper3, data_3)</span><br></pre></td></tr></table></figure>
<pre><code>3x1 Array{Float64,2}:
 1.0
 2.0
 3.0
</code></pre><h3 id="Columns-that-don’t-need-any-transformation"><a href="#Columns-that-don’t-need-any-transformation" class="headerlink" title="Columns that don’t need any transformation"></a>Columns that don’t need any transformation</h3><p>Only columns that are listed in the <code>DataFrameMapper</code> are kept. To keep a column but don’t apply any transformation to it, use <code>nothing</code> as transformer:</p>
<figure class="highlight julia"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mapper3 = DataFrameMapper([</span><br><span class="line">     (:pet, LabelBinarizer()),</span><br><span class="line">     (:children, <span class="literal">nothing</span>)])</span><br><span class="line">round(fit_transform!(mapper3, copy(data)))</span><br></pre></td></tr></table></figure>
<pre><code>8x4 Array{Float64,2}:
 1.0  0.0  0.0  4.0
 0.0  1.0  0.0  6.0
 0.0  1.0  0.0  3.0
 0.0  0.0  1.0  3.0
 1.0  0.0  0.0  2.0
 0.0  1.0  0.0  3.0
 1.0  0.0  0.0  5.0
 0.0  0.0  1.0  4.0
</code></pre><h2 id="Cross-validation"><a href="#Cross-validation" class="headerlink" title="Cross-validation"></a>Cross-validation</h2><p>Now that we can combine features from a DataFrame, we may want to use cross-validation to see whether our model works.</p>
<figure class="highlight julia"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@sk_import</span> linear_model: LinearRegression</span><br><span class="line"></span><br><span class="line">pipe = Pipelines.Pipeline([</span><br><span class="line">     (:featurize, mapper),</span><br><span class="line">     (:lm, LinearRegression())])</span><br><span class="line">round(CrossValidation.cross_val_score(pipe, data, data[:salary]), <span class="number">2</span>)</span><br></pre></td></tr></table></figure>
<pre><code>3-element Array{Float64,1}:
  -1.09
  -5.3 
 -15.38
</code></pre><h2 id="Iris-Dataset"><a href="#Iris-Dataset" class="headerlink" title="Iris Dataset"></a>Iris Dataset</h2><figure class="highlight julia"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> RDatasets: dataset</span><br><span class="line"><span class="keyword">using</span> ScikitLearn</span><br><span class="line"></span><br><span class="line"><span class="meta">@sk_import</span> linear_model: LogisticRegression</span><br><span class="line"></span><br><span class="line">iris = dataset(<span class="string">"datasets"</span>, <span class="string">"iris"</span>)</span><br><span class="line"></span><br><span class="line">X = convert(<span class="built_in">Array</span>, iris[[:SepalLength, :SepalWidth, :PetalLength, :PetalWidth]])</span><br><span class="line">y = convert(<span class="built_in">Array</span>, iris[:Species])</span><br><span class="line"></span><br><span class="line">model = fit!(LogisticRegression(), X, y)</span><br><span class="line">accuracy = sum(predict(model, X) .== y) / length(y)</span><br><span class="line">println(<span class="string">"accuracy: <span class="variable">$accuracy</span>"</span>)  <span class="comment"># accuracy on training set</span></span><br></pre></td></tr></table></figure>
<pre><code>WARNING: Compat.UTF8String is deprecated, use String instead.
  likely near /Users/kay/.julia/v0.6/IJulia/src/kernel.jl:31
WARNING: Compat.UTF8String is deprecated, use String instead.
  likely near /Users/kay/.julia/v0.6/IJulia/src/kernel.jl:31
WARNING: Compat.UTF8String is deprecated, use String instead.
  likely near /Users/kay/.julia/v0.6/IJulia/src/kernel.jl:31
WARNING: Compat.UTF8String is deprecated, use String instead.
  likely near /Users/kay/.julia/v0.6/IJulia/src/kernel.jl:31
WARNING: Compat.UTF8String is deprecated, use String instead.
  likely near /Users/kay/.julia/v0.6/IJulia/src/kernel.jl:31
WARNING: Compat.UTF8String is deprecated, use String instead.
  likely near /Users/kay/.julia/v0.6/IJulia/src/kernel.jl:31
WARNING: Compat.UTF8String is deprecated, use String instead.
  likely near /Users/kay/.julia/v0.6/IJulia/src/kernel.jl:31


accuracy: 0.96
</code></pre><figure class="highlight julia"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> ScikitLearn.CrossValidation: cross_val_score</span><br><span class="line"></span><br><span class="line">cross_val_score(LogisticRegression(), X, y, cv=<span class="number">5</span>)  <span class="comment"># 5-fold</span></span><br></pre></td></tr></table></figure>
<pre><code>5-element Array{Float64,1}:
 1.0     
 0.966667
 0.933333
 0.9     
 1.0     
</code></pre><figure class="highlight julia"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> ScikitLearn.GridSearch: GridSearchCV</span><br></pre></td></tr></table></figure>
<figure class="highlight julia"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gridsearch = GridSearchCV(LogisticRegression(), <span class="built_in">Dict</span>(:C =&gt; <span class="number">0.1</span>:<span class="number">0.1</span>:<span class="number">2.0</span>))</span><br><span class="line">fit!(gridsearch, X, y)</span><br><span class="line">println(<span class="string">"Best parameters: <span class="subst">$(gridsearch.best_params_)</span>"</span>)</span><br></pre></td></tr></table></figure>
<pre><code>Best parameters: Dict{Symbol,Any}(Pair{Symbol,Any}(:C, 1.1))
</code></pre><figure class="highlight julia"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> PyPlot</span><br><span class="line"></span><br><span class="line">plot([cv_res.parameters[:C] <span class="keyword">for</span> cv_res <span class="keyword">in</span> gridsearch.grid_scores_],</span><br><span class="line">[mean(cv_res.cv_validation_scores) <span class="keyword">for</span> cv_res <span class="keyword">in</span> gridsearch.grid_scores_])</span><br></pre></td></tr></table></figure>
<pre><code>[1m[36mINFO: [39m[22m[36mRecompiling stale cache file /Users/kay/.julia/lib/v0.6/PyPlot.ji for module PyPlot.
[39m
</code></pre><p><img src="http://oye4atjxc.bkt.clouddn.com/leanote/iris/output_4_1.png" alt="png"></p>
<pre><code>1-element Array{PyCall.PyObject,1}:
 PyObject &lt;matplotlib.lines.Line2D object at 0x1a3b5abc50&gt;
</code></pre><figure class="highlight julia"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?GridSearchCV</span><br></pre></td></tr></table></figure>
<pre><code>search: [1mG[22m[1mr[22m[1mi[22m[1md[22m[1mS[22m[1me[22m[1ma[22m[1mr[22m[1mc[22m[1mh[22m
</code></pre><p>Exhaustive search over specified parameter values for an estimator.</p>
<p>Important members are fit, predict.</p>
<p>GridSearchCV implements a “fit” method and a “predict” method like any classifier except that the parameters of the classifier used to predict is optimized by cross-validation.</p>
<h2 id="Parameters"><a href="#Parameters" class="headerlink" title="Parameters"></a>Parameters</h2><p>estimator : object type that implements the “fit” and “predict” methods     A object of that type is instantiated for each grid point.</p>
<p>param_grid : dict or list of dictionaries     Dictionary with parameters names (string) as keys and lists of     parameter settings to try as values, or a list of such     dictionaries, in which case the grids spanned by each dictionary     in the list are explored. This enables searching over any sequence     of parameter settings.</p>
<p>scoring : string, callable or None, optional, default: None     A string (see model evaluation documentation) or     a scorer callable object / function with signature     $scorer(estimator, X, y)$.</p>
<p>fit_params : dict, optional     Parameters to pass to the fit method.</p>
<p>n_jobs : int, default 1     Number of jobs to run in parallel.</p>
<p>pre_dispatch : int, or string, optional     Controls the number of jobs that get dispatched during parallel     execution. Reducing this number can be useful to avoid an     explosion of memory consumption when more jobs get dispatched     than CPUs can process. This parameter can be:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">- None, in which case all the jobs are immediately</span><br><span class="line">  created and spawned. Use this for lightweight and</span><br><span class="line">  fast-running jobs, to avoid delays due to on-demand</span><br><span class="line">  spawning of the jobs</span><br><span class="line"></span><br><span class="line">- An int, giving the exact number of total jobs that are</span><br><span class="line">  spawned</span><br><span class="line"></span><br><span class="line">- A string, giving an expression as a function of n_jobs,</span><br><span class="line">  as in &apos;2*n_jobs&apos;</span><br></pre></td></tr></table></figure>
<p>iid : boolean, default=True     If True, the data is assumed to be identically distributed across     the folds, and the loss minimized is the total loss per sample,     and not the mean loss across the folds.</p>
<p>cv : integer or cross-validation generator, default=3     If an integer is passed, it is the number of folds.     Specific cross-validation objects can be passed, see     sklearn.cross_validation module for the list of possible objects</p>
<p>refit : boolean, default=True     Refit the best estimator with the entire dataset.     If “False”, it is impossible to make predictions using     this GridSearchCV instance after fitting.</p>
<p>verbose : integer     Controls the verbosity: the higher, the more messages.</p>
<p>error_score : ‘raise’ (default) or numeric     Value to assign to the score if an error occurs in estimator fitting.     If set to ‘raise’, the error is raised. If a numeric value is given,     FitFailedWarning is raised. This parameter does not affect the refit     step, which will always raise the error.</p>
<h2 id="Examples"><a href="#Examples" class="headerlink" title="Examples"></a>Examples</h2><blockquote>
<blockquote>
<blockquote>
<p>from sklearn import svm, grid_search, datasets iris = datasets.load_iris() parameters = {‘kernel’:(‘linear’, ‘rbf’), ‘C’:[1, 10]} svr = svm.SVC() clf = grid_search.GridSearchCV(svr, parameters) clf.fit(iris.data, iris.target)</p>
</blockquote>
</blockquote>
</blockquote>
<p>…                             # doctest: +NORMALIZE_WHITESPACE +ELLIPSIS GridSearchCV(cv=None, error_score=…,        estimator=SVC(C=1.0, cache_size=…, class_weight=…, coef0=…,                      degree=…, gamma=…, kernel=’rbf’, max_iter=-1,                      probability=False, random_state=None, shrinking=True,                      tol=…, verbose=False),        fit_params={}, iid=…, n_jobs=1,        param_grid=…, pre_dispatch=…, refit=…,        scoring=…, verbose=…)</p>
<h2 id="Attributes"><a href="#Attributes" class="headerlink" title="Attributes"></a>Attributes</h2><p>grid<em>scores</em> : list of named tuples     Contains scores for all parameter combinations in param_grid.     Each entry corresponds to one parameter setting.     Each named tuple has the attributes:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">* ``parameters``, a dict of parameter settings</span><br><span class="line">* ``mean_validation_score``, the mean score over the</span><br><span class="line">  cross-validation folds</span><br><span class="line">* ``cv_validation_scores``, the list of scores for each fold</span><br></pre></td></tr></table></figure>
<p>best<em>estimator</em> : estimator     Estimator that was chosen by the search, i.e. estimator     which gave highest score (or smallest loss if specified)     on the left out data. Not available if refit=False.</p>
<p>best<em>score</em> : float     Score of best_estimator on the left out data.</p>
<p>best<em>params</em> : dict     Parameter setting that gave the best results on the hold out data.</p>
<p>scorer_ : function     Scorer function used on the held out data to choose the best     parameters for the model.</p>
<h2 id="Notes"><a href="#Notes" class="headerlink" title="Notes"></a>Notes</h2><p>The parameters selected are those that maximize the score of the left out data, unless an explicit score is passed in which case it is used instead.</p>
<p>If <code>n_jobs</code> was set to a value higher than one, the data is copied for each point in the grid (and not <code>n_jobs</code> times). This is done for efficiency reasons if individual jobs take very little time, but may raise errors if the dataset is large and not enough memory is available.  A workaround in this case is to set <code>pre_dispatch</code>. Then, the memory is copied only <code>pre_dispatch</code> many times. A reasonable value for <code>pre_dispatch</code> is <code>2 * n_jobs</code>.</p>
<h2 id="See-Also"><a href="#See-Also" class="headerlink" title="See Also"></a>See Also</h2><p>:class:<code>ParameterGrid</code>:     generates all the combinations of a an hyperparameter grid.</p>
<p>:func:<code>sklearn.cross_validation.train_test_split</code>:     utility function to split the data into a development set usable     for fitting a GridSearchCV instance and an evaluation set for     its final evaluation.</p>
<p>:func:<code>sklearn.metrics.make_scorer</code>:     Make a scorer from a performance metric or loss function.</p>
<figure class="highlight julia"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Grid</span><br></pre></td></tr></table></figure>
<pre><code>UndefVarError: Grid not defined
</code></pre><p>​    </p>
<pre><code>Stacktrace:

 [1] include_string(::String, ::String) at ./loading.jl:515
</code></pre><figure class="highlight julia"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> PyCall</span><br></pre></td></tr></table></figure>
<figure class="highlight julia"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PyCall.np</span><br></pre></td></tr></table></figure>
<pre><code>UndefVarError: np not defined
</code></pre><p>​    </p>
<pre><code>Stacktrace:

 [1] include_string(::String, ::String) at ./loading.jl:515
</code></pre><figure class="highlight julia"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@pyimport</span> numpy</span><br></pre></td></tr></table></figure>
<figure class="highlight julia"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pytypeof(model[:predict](X))</span><br></pre></td></tr></table></figure>
<pre><code>PyObject &lt;type &apos;numpy.ndarray&apos;&gt;
</code></pre><figure class="highlight julia"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pyisinstance(model[:predict](X), numpy.ndarray)</span><br></pre></td></tr></table></figure>
<pre><code>true
</code></pre><figure class="highlight julia"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@pyimport</span> sklearn.decomposition as decomp</span><br><span class="line"><span class="meta">@pyimport</span> sklearn.linear_model as lin</span><br></pre></td></tr></table></figure>
<figure class="highlight julia"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">log_mod = lin.LinearRegression()[:fit](randn(<span class="number">50</span>, <span class="number">3</span>), rand(<span class="number">0</span>:<span class="number">1</span>, <span class="number">50</span>))</span><br><span class="line">log_mod[:predict](randn(<span class="number">50</span>, <span class="number">3</span>))</span><br></pre></td></tr></table></figure>
<pre><code>50-element Array{Float64,1}:
  0.162175 
  0.722845 
  0.362414 
  0.549103 
  0.763084 
  0.270936 
  0.485301 
  0.41325  
  0.393773 
  0.663121 
  0.595053 
  0.498473 
  0.42885  
  ⋮        
  0.639132 
  0.702459 
  0.60041  
  0.229709 
  0.296202 
  0.34932  
 -0.0609968
  0.680865 
  0.0816659
  0.433398 
  0.463019 
  0.542642 
</code></pre><figure class="highlight julia"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">m = decomp.PCA()[:fit](randn(<span class="number">20</span>,<span class="number">10</span>))</span><br><span class="line">m[:transform](randn(<span class="number">30</span>, <span class="number">10</span>))</span><br></pre></td></tr></table></figure>
<pre><code>30×10 Array{Float64,2}:
  0.0492857  -0.740589     0.0282217  …   0.607899    0.582307    1.04095  
 -0.766687   -0.00563516  -0.972977      -0.111523   -1.61246     1.21119  
 -0.304345   -0.195561     0.523944       1.17019    -0.159978   -2.34993  
 -1.5165      0.725348    -0.589536      -0.077829    0.384159   -2.53808  
  0.10421    -0.592984    -0.579348       0.581532    0.0428926  -0.231679 
 -1.92898     1.20708     -1.7819     …  -1.17005    -0.994895   -1.03124  
 -0.436318    0.954802    -0.300581      -0.849914    2.33628     0.810238 
 -1.10481     0.913266     0.872128      -0.0772121  -0.562754   -0.689544 
 -0.456214    0.16222      0.0980988     -0.773041   -0.764416    0.683189 
 -0.273398    1.21917      0.627378      -1.00523     0.514595   -2.58339  
  0.570575    0.247493    -1.07453    …  -0.366462    0.36321    -0.639821 
 -0.233897   -1.67526     -1.66674        1.33278     0.122427    1.04181  
 -0.624457    0.741128    -1.67955       -0.311017    1.28079    -0.685025 
  ⋮                                   ⋱                                    
 -0.388898   -2.29054      0.498946      -2.33793     1.6837     -0.488352 
  0.403224    0.317897    -0.290501      -1.13959     0.55129     1.11115  
  0.857659   -0.918163    -0.0997422  …  -1.3764      0.581696   -0.0762093
  0.304933    0.549334     1.4302         0.335545   -0.934283    0.110987 
 -0.255592   -1.78458     -0.831169       0.572008    1.22434     0.335873 
  0.31237    -1.03264     -1.22471       -0.258204   -0.299442   -0.995692 
  0.405265   -0.508662     0.657679      -0.404234    1.092      -0.439828 
  0.390309   -1.77777      0.132518   …   2.10857    -1.26122     0.442358 
 -0.687856    1.27136      1.76452       -1.73486    -0.400697    0.084941 
 -0.963835   -0.826341    -1.03699       -0.11351     2.36443    -1.27699  
 -1.94291    -1.02019      0.786294      -2.08115    -0.954      -1.44567  
 -0.926151    1.12885     -0.56298       -1.75913     0.183775   -0.987595 
</code></pre><figure class="highlight julia"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">model[:predict](X)</span><br></pre></td></tr></table></figure>
<pre><code>PyObject array([&apos;setosa&apos;, &apos;setosa&apos;, &apos;setosa&apos;, &apos;setosa&apos;, &apos;setosa&apos;, &apos;setosa&apos;,
       &apos;setosa&apos;, &apos;setosa&apos;, &apos;setosa&apos;, &apos;setosa&apos;, &apos;setosa&apos;, &apos;setosa&apos;,
       &apos;setosa&apos;, &apos;setosa&apos;, &apos;setosa&apos;, &apos;setosa&apos;, &apos;setosa&apos;, &apos;setosa&apos;,
       &apos;setosa&apos;, &apos;setosa&apos;, &apos;setosa&apos;, &apos;setosa&apos;, &apos;setosa&apos;, &apos;setosa&apos;,
       &apos;setosa&apos;, &apos;setosa&apos;, &apos;setosa&apos;, &apos;setosa&apos;, &apos;setosa&apos;, &apos;setosa&apos;,
       &apos;setosa&apos;, &apos;setosa&apos;, &apos;setosa&apos;, &apos;setosa&apos;, &apos;setosa&apos;, &apos;setosa&apos;,
       &apos;setosa&apos;, &apos;setosa&apos;, &apos;setosa&apos;, &apos;setosa&apos;, &apos;setosa&apos;, &apos;setosa&apos;,
       &apos;setosa&apos;, &apos;setosa&apos;, &apos;setosa&apos;, &apos;setosa&apos;, &apos;setosa&apos;, &apos;setosa&apos;,
       &apos;setosa&apos;, &apos;setosa&apos;, &apos;versicolor&apos;, &apos;versicolor&apos;, &apos;versicolor&apos;,
       &apos;versicolor&apos;, &apos;versicolor&apos;, &apos;versicolor&apos;, &apos;versicolor&apos;,
       &apos;versicolor&apos;, &apos;versicolor&apos;, &apos;versicolor&apos;, &apos;versicolor&apos;,
       &apos;versicolor&apos;, &apos;versicolor&apos;, &apos;versicolor&apos;, &apos;versicolor&apos;,
       &apos;versicolor&apos;, &apos;virginica&apos;, &apos;versicolor&apos;, &apos;versicolor&apos;, &apos;versicolor&apos;,
       &apos;virginica&apos;, &apos;versicolor&apos;, &apos;versicolor&apos;, &apos;versicolor&apos;, &apos;versicolor&apos;,
       &apos;versicolor&apos;, &apos;versicolor&apos;, &apos;versicolor&apos;, &apos;versicolor&apos;,
       &apos;versicolor&apos;, &apos;versicolor&apos;, &apos;versicolor&apos;, &apos;versicolor&apos;, &apos;virginica&apos;,
       &apos;virginica&apos;, &apos;virginica&apos;, &apos;versicolor&apos;, &apos;versicolor&apos;, &apos;versicolor&apos;,
       &apos;versicolor&apos;, &apos;versicolor&apos;, &apos;versicolor&apos;, &apos;versicolor&apos;,
       &apos;versicolor&apos;, &apos;versicolor&apos;, &apos;versicolor&apos;, &apos;versicolor&apos;,
       &apos;versicolor&apos;, &apos;versicolor&apos;, &apos;versicolor&apos;, &apos;virginica&apos;, &apos;virginica&apos;,
       &apos;virginica&apos;, &apos;virginica&apos;, &apos;virginica&apos;, &apos;virginica&apos;, &apos;virginica&apos;,
       &apos;virginica&apos;, &apos;virginica&apos;, &apos;virginica&apos;, &apos;virginica&apos;, &apos;virginica&apos;,
       &apos;virginica&apos;, &apos;virginica&apos;, &apos;virginica&apos;, &apos;virginica&apos;, &apos;virginica&apos;,
       &apos;virginica&apos;, &apos;virginica&apos;, &apos;virginica&apos;, &apos;virginica&apos;, &apos;virginica&apos;,
       &apos;virginica&apos;, &apos;virginica&apos;, &apos;virginica&apos;, &apos;virginica&apos;, &apos;virginica&apos;,
       &apos;virginica&apos;, &apos;virginica&apos;, &apos;versicolor&apos;, &apos;virginica&apos;, &apos;virginica&apos;,
       &apos;virginica&apos;, &apos;virginica&apos;, &apos;virginica&apos;, &apos;virginica&apos;, &apos;virginica&apos;,
       &apos;virginica&apos;, &apos;virginica&apos;, &apos;virginica&apos;, &apos;virginica&apos;, &apos;virginica&apos;,
       &apos;virginica&apos;, &apos;virginica&apos;, &apos;virginica&apos;, &apos;virginica&apos;, &apos;virginica&apos;,
       &apos;virginica&apos;, &apos;virginica&apos;, &apos;virginica&apos;],
      dtype=&apos;|S10&apos;)
</code></pre></div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">Monad Kai</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="../../../../onlookerliu.github.io/2017/12/29/DataFrame-Demo/">onlookerliu.github.io/2017/12/29/DataFrame-Demo/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="onlookerliu.github.io" target="_blank">Code@浮生记</a>！</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="../../../../tags/julia/">julia</a></div><nav id="pagination"><div class="prev-post pull-left"><a href="../Clustering-Comparison/"><i class="fa fa-chevron-left">  </i><span>Clustering_Comparison</span></a></div><div class="next-post pull-right"><a href="../../28/dot语法总结/"><span>dot语法总结</span><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2013 - 2018 By Monad Kai</div><div class="framework-info"><span>驱动 - </span><a href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="busuanzi"><script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file-o"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="../../../../js/third-party/anime.min.js"></script><script src="../../../../js/third-party/jquery.min.js"></script><script src="../../../../js/third-party/jquery.fancybox.min.js"></script><script src="../../../../js/third-party/velocity.min.js"></script><script src="../../../../js/third-party/velocity.ui.min.js"></script><script src="../../../../js/utils.js?version=1.5.3"></script><script src="../../../../js/fancybox.js?version=1.5.3"></script><script src="../../../../js/sidebar.js?version=1.5.3"></script><script src="../../../../js/copy.js?version=1.5.3"></script><script src="../../../../js/fireworks.js?version=1.5.3"></script><script src="../../../../js/transition.js?version=1.5.3"></script><script src="../../../../js/scroll.js?version=1.5.3"></script><script src="../../../../js/head.js?version=1.5.3"></script></body></html>