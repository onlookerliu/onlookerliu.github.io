<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="Simple Implement of Spring MVC"><meta name="keywords" content="Java"><meta name="author" content="Monad Kai,undefined"><meta name="copyright" content="Monad Kai"><title>Simple Implement of Spring MVC | Code@浮生记</title><link rel="shortcut icon" href="https://avatars1.githubusercontent.com/u/168751?v=3&s=140"><link rel="stylesheet" href="../../../../css/index.css"><link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.min.css?version=1.5.3"><link rel="dns-prefetch" href="https://cdn.staticfile.org"><link rel="dns-prefetch" href="https://cdn.bootcss.com"><link rel="dns-prefetch" href="https://creativecommons.org"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  localSearch: undefined
} </script></head><body><canvas class="fireworks"></canvas><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar"><div class="toggle-sidebar-info text-center"><span data-toggle="切换文章详情">切换站点概览</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#简单模拟Spring-MVC"><span class="toc-number">1.</span> <span class="toc-text">简单模拟Spring MVC</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#一、编写注解"><span class="toc-number">1.1.</span> <span class="toc-text">一、编写注解</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-Controller注解"><span class="toc-number">1.1.1.</span> <span class="toc-text">1.1 Controller注解</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-RequestMapping注解"><span class="toc-number">1.1.2.</span> <span class="toc-text">1.2 RequestMapping注解</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#编写核心的注解处理器"><span class="toc-number">1.2.</span> <span class="toc-text">编写核心的注解处理器</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-开发AnnotationHandleServlet"><span class="toc-number">1.2.1.</span> <span class="toc-text">2.1 开发AnnotationHandleServlet</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-在Web-xml文件中注册AnnotationHandleServlet"><span class="toc-number">1.2.2.</span> <span class="toc-text">2.2 在Web.xml文件中注册AnnotationHandleServlet</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#三、相关代码讲解"><span class="toc-number">1.3.</span> <span class="toc-text">三、相关代码讲解</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-BeanUtils"><span class="toc-number">1.3.1.</span> <span class="toc-text">3.1 BeanUtils</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-RequestMapingMap"><span class="toc-number">1.3.2.</span> <span class="toc-text">3.2 RequestMapingMap</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-ScanClassUtil"><span class="toc-number">1.3.3.</span> <span class="toc-text">3.3. ScanClassUtil</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-4-WebContext"><span class="toc-number">1.3.4.</span> <span class="toc-text">3.4 WebContext</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-5-View"><span class="toc-number">1.3.5.</span> <span class="toc-text">3.5 View</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-6-ViewData"><span class="toc-number">1.3.6.</span> <span class="toc-text">3.6 ViewData</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-7-DispatchActionConstant"><span class="toc-number">1.3.7.</span> <span class="toc-text">3.7 DispatchActionConstant</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#四、Controller注解和RequestMapping注解测试"><span class="toc-number">1.4.</span> <span class="toc-text">四、Controller注解和RequestMapping注解测试</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-1-简单测试"><span class="toc-number">1.4.1.</span> <span class="toc-text">4.1 简单测试</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-复杂测试"><span class="toc-number">1.4.2.</span> <span class="toc-text">4.2 复杂测试</span></a></li></ol></li></ol></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="http://oxyywddt8.bkt.clouddn.com/portrait/portrait.jpg"></div><div class="author-info__name text-center">Monad Kai</div><div class="author-info__description text-center">Life is beautiful!</div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="../../../../archives"><span class="pull-left">文章</span><span class="pull-right">86</span></a><a class="author-info-articles__tags article-meta" href="../../../../tags"><span class="pull-left">标签</span><span class="pull-right">21</span></a></div><hr><div class="author-info-links"><div class="author-info-links__title text-center">Links</div><a class="author-info-links__name text-center" href="https://Lstyle1.github.io" target="_blank">Lyn</a><a class="author-info-links__name text-center" href="http://onlookerliu.leanote.com" target="_blank">另外一个关于数学的博客</a><a class="author-info-links__name text-center" href="http://jamesmwh.cn/" target="_blank">James MWH的博客</a><a class="author-info-links__name text-center" href="https://www.liaoxuefeng.com" target="_blank">廖雪峰的网站</a><a class="author-info-links__name text-center" href="http://www.ruanyifeng.com" target="_blank">阮一峰的网络日志</a><a class="author-info-links__name text-center" href="https://www.open-open.com" target="_blank">深度开源</a><a class="author-info-links__name text-center" href="https://www.nowcoder.com" target="_blank">牛客网</a><a class="author-info-links__name text-center" href="https://leetcode.com" target="_blank">LeetCode</a><a class="author-info-links__name text-center" href="http://www.learnyouahaskell.com" target="_blank">Haskell</a><a class="author-info-links__name text-center" href="https://www.kaggle.com/learn/overview" target="_blank">Kaggle</a><a class="author-info-links__name text-center" href="https://developers.google.cn/machine-learning/crash-course/framing/video-lecture" target="_blank">Google的AI课程</a><a class="author-info-links__name text-center" href="https://projecteuler.net/" target="_blank">Project Euler</a><a class="author-info-links__name text-center" href="https://beta.observablehq.com/" target="_blank">Observable Notebook</a><a class="author-info-links__name text-center" href="https://www.juliabox.com" target="_blank">JuliaBox</a><a class="author-info-links__name text-center" href="http://community.schemewiki.org/?scip-solutions" target="_blank">SICP Solutions</a></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(https://user-images.githubusercontent.com/12621342/37325500-23e8f77c-26c9-11e8-8e24-eb4346f1fff5.png)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">Code@浮生记</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus"><a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a><a class="site-page" href="/gallery">Gallery</a></span></div><div id="post-info"><div id="post-title">Simple Implement of Spring MVC</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2018-03-26</time><div class="post-meta-wordcount"><span>字数总计: </span><span class="word-count">5,791</span><span class="post-meta__separator">|</span><span>阅读时长: 27 分钟</span></div></div></div></div><div class="layout" id="content-inner"><article id="post"><div id="post-content"><h2 id="简单模拟Spring-MVC"><a href="#简单模拟Spring-MVC" class="headerlink" title="简单模拟Spring MVC"></a>简单模拟Spring MVC</h2><p>在Spring MVC中，将一个普通的java类标注上Controller注解之后，再将类中的方法使用RequestMapping注解标注，那么这个普通的java类就够处理Web请求，示例代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 使用Controller注解标注LoginUI类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginUI</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//使用RequestMapping注解指明forward1方法的访问路径  </span></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"LoginUI/Login2"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> View <span class="title">forward1</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//执行完forward1方法之后返回的视图</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> View(<span class="string">"/login2.jsp"</span>);  </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//使用RequestMapping注解指明forward2方法的访问路径  </span></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"LoginUI/Login3"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> View <span class="title">forward2</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//执行完forward2方法之后返回的视图</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> View(<span class="string">"/login3.jsp"</span>);  </span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>spring通过java annotation就可以注释一个类为action ，在方法上添加上一个java annotation 就可以配置请求的路径了，那么这种机制是如何实现的呢，今天我们使用”自定义注解+Servlet”来简单模拟一下Spring MVC中的这种注解配置方式。</p>
<a id="more"></a>
<h3 id="一、编写注解"><a href="#一、编写注解" class="headerlink" title="一、编写注解"></a>一、编写注解</h3><h4 id="1-1-Controller注解"><a href="#1-1-Controller注解" class="headerlink" title="1.1 Controller注解"></a>1.1 Controller注解</h4><p>开发Controller注解，这个注解只有一个value属性，默认值为空字符串，代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> me.gacl.annotation;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.ElementType;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.Retention;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.RetentionPolicy;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.Target;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* <span class="doctag">@ClassName</span>: Controller</span></span><br><span class="line"><span class="comment">* <span class="doctag">@Description</span>: 自定义Controller注解</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">*/</span> </span><br><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class="line"><span class="meta">@Target</span>(ElementType.TYPE)</span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Controller &#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">value</span><span class="params">()</span> <span class="keyword">default</span> ""</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="1-2-RequestMapping注解"><a href="#1-2-RequestMapping注解" class="headerlink" title="1.2 RequestMapping注解"></a>1.2 RequestMapping注解</h4><p>开发RequestMapping注解，用于定义请求路径，这个注解只有一个value属性，默认值为空字符串，代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> me.gacl.annotation;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.ElementType;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.Retention;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.RetentionPolicy;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.Target;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 定义请求路径的java annotation</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Target</span>(ElementType.METHOD) </span><br><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.RUNTIME)  </span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> RequestMapping &#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">value</span><span class="params">()</span> <span class="keyword">default</span> ""</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>以上就是我们自定义的两个注解，注解的开发工作就算是完成了，有了注解之后，那么就必须针对注解来编写处理器，否则我们开发的注解配置到类或者方法上面是不起作用的，这里我们使用Servlet来作为注解的处理器。</p>
<h3 id="编写核心的注解处理器"><a href="#编写核心的注解处理器" class="headerlink" title="编写核心的注解处理器"></a>编写核心的注解处理器</h3><h4 id="2-1-开发AnnotationHandleServlet"><a href="#2-1-开发AnnotationHandleServlet" class="headerlink" title="2.1 开发AnnotationHandleServlet"></a>2.1 开发AnnotationHandleServlet</h4><p>这里使用一个Servlet来作为注解处理器，编写一个AnnotationHandleServlet，代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> me.gacl.web.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.InvocationTargetException;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletConfig;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> me.gacl.annotation.Controller;</span><br><span class="line"><span class="keyword">import</span> me.gacl.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> me.gacl.util.BeanUtils;</span><br><span class="line"><span class="keyword">import</span> me.gacl.util.RequestMapingMap;</span><br><span class="line"><span class="keyword">import</span> me.gacl.util.ScanClassUtil;</span><br><span class="line"><span class="keyword">import</span> me.gacl.web.context.WebContext;</span><br><span class="line"><span class="keyword">import</span> me.gacl.web.view.DispatchActionConstant;</span><br><span class="line"><span class="keyword">import</span> me.gacl.web.view.View;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;ClassName: AnnotationHandleServlet&lt;p&gt;</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;Description: AnnotationHandleServlet作为自定义注解的核心处理器以及负责调用目标业务方法处理用户请求&lt;p&gt;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AnnotationHandleServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">private</span> String <span class="title">pareRequestURI</span><span class="params">(HttpServletRequest request)</span></span>&#123;</span><br><span class="line">        String path = request.getContextPath()+<span class="string">"/"</span>;</span><br><span class="line">        String requestUri = request.getRequestURI();</span><br><span class="line">        String midUrl = requestUri.replaceFirst(path, <span class="string">""</span>);</span><br><span class="line">        String lasturl = midUrl.substring(<span class="number">0</span>, midUrl.lastIndexOf(<span class="string">"."</span>));</span><br><span class="line">        <span class="keyword">return</span> lasturl;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.excute(request, response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.excute(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">excute</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException</span>&#123;</span><br><span class="line">        <span class="comment">//将当前线程中HttpServletRequest对象存储到ThreadLocal中，以便在Controller类中使用</span></span><br><span class="line">        WebContext.requestHodler.set(request);</span><br><span class="line">        <span class="comment">//将当前线程中HttpServletResponse对象存储到ThreadLocal中，以便在Controller类中使用</span></span><br><span class="line">        WebContext.responseHodler.set(response);</span><br><span class="line">        <span class="comment">//解析url</span></span><br><span class="line">        String lasturl = pareRequestURI(request);</span><br><span class="line">        <span class="comment">//获取要使用的类</span></span><br><span class="line">        Class&lt;?&gt; clazz = RequestMapingMap.getRequesetMap().get(lasturl);</span><br><span class="line">        <span class="comment">//创建类的实例</span></span><br><span class="line">        Object classInstance = BeanUtils.instanceClass(clazz);</span><br><span class="line">        <span class="comment">//获取类中定义的方法</span></span><br><span class="line">        Method [] methods = BeanUtils.findDeclaredMethods(clazz);</span><br><span class="line">        Method method = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">for</span>(Method m:methods)&#123;<span class="comment">//循环方法，找匹配的方法进行执行</span></span><br><span class="line">            <span class="keyword">if</span>(m.isAnnotationPresent(RequestMapping.class))&#123;</span><br><span class="line">                String anoPath = m.getAnnotation(RequestMapping.class).value();</span><br><span class="line">                <span class="keyword">if</span>(anoPath!=<span class="keyword">null</span> &amp;&amp; !<span class="string">""</span>.equals(anoPath.trim()) &amp;&amp; lasturl.equals(anoPath.trim()))&#123;</span><br><span class="line">                    <span class="comment">//找到要执行的目标方法</span></span><br><span class="line">                    method = m;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">if</span>(method!=<span class="keyword">null</span>)&#123;</span><br><span class="line">                <span class="comment">//执行目标方法处理用户请求</span></span><br><span class="line">                Object retObject = method.invoke(classInstance);</span><br><span class="line">                <span class="comment">//如果方法有返回值，那么就表示用户需要返回视图</span></span><br><span class="line">                <span class="keyword">if</span> (retObject!=<span class="keyword">null</span>) &#123;</span><br><span class="line">                    View view = (View)retObject;</span><br><span class="line">                    <span class="comment">//判断要使用的跳转方式</span></span><br><span class="line">                    <span class="keyword">if</span>(view.getDispathAction().equals(DispatchActionConstant.FORWARD))&#123;</span><br><span class="line">                        <span class="comment">//使用服务器端跳转方式</span></span><br><span class="line">                        request.getRequestDispatcher(view.getUrl()).forward(request, response);</span><br><span class="line">                    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(view.getDispathAction().equals(DispatchActionConstant.REDIRECT))&#123;</span><br><span class="line">                        <span class="comment">//使用客户端跳转方式</span></span><br><span class="line">                        response.sendRedirect(request.getContextPath()+view.getUrl());</span><br><span class="line">                    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                        request.getRequestDispatcher(view.getUrl()).forward(request, response);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IllegalArgumentException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IllegalAccessException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InvocationTargetException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(ServletConfig config)</span> <span class="keyword">throws</span> ServletException </span>&#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 重写了Servlet的init方法后一定要记得调用父类的init方法，</span></span><br><span class="line"><span class="comment">         * 否则在service/doGet/doPost方法中使用getServletContext()方法获取ServletContext对象时</span></span><br><span class="line"><span class="comment">         * 就会出现java.lang.NullPointerException异常</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">super</span>.init(config); </span><br><span class="line">        System.out.println(<span class="string">"---初始化开始---"</span>);</span><br><span class="line">        <span class="comment">//获取web.xml中配置的要扫描的包</span></span><br><span class="line">        String basePackage = config.getInitParameter(<span class="string">"basePackage"</span>);</span><br><span class="line">        <span class="comment">//如果配置了多个包，例如：&lt;param-value&gt;me.gacl.web.controller,me.gacl.web.UI&lt;/param-value&gt;</span></span><br><span class="line">        <span class="keyword">if</span> (basePackage.indexOf(<span class="string">","</span>)&gt;<span class="number">0</span>) &#123;</span><br><span class="line">            <span class="comment">//按逗号进行分隔</span></span><br><span class="line">            String[] packageNameArr = basePackage.split(<span class="string">","</span>);</span><br><span class="line">            <span class="keyword">for</span> (String packageName : packageNameArr) &#123;</span><br><span class="line">                initRequestMapingMap(packageName);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            initRequestMapingMap(basePackage);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">"----初始化结束---"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Method</span>: initRequestMapingMap</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Description</span>:添加使用了Controller注解的Class到RequestMapingMap中</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> packageName</span></span><br><span class="line"><span class="comment">    */</span> </span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">initRequestMapingMap</span><span class="params">(String packageName)</span></span>&#123;</span><br><span class="line">        Set&lt;Class&lt;?&gt;&gt; setClasses =  ScanClassUtil.getClasses(packageName);</span><br><span class="line">        <span class="keyword">for</span> (Class&lt;?&gt; clazz :setClasses) &#123;</span><br><span class="line">            <span class="keyword">if</span> (clazz.isAnnotationPresent(Controller.class)) &#123;</span><br><span class="line">                Method [] methods = BeanUtils.findDeclaredMethods(clazz);</span><br><span class="line">                <span class="keyword">for</span>(Method m:methods)&#123;<span class="comment">//循环方法，找匹配的方法进行执行</span></span><br><span class="line">                    <span class="keyword">if</span>(m.isAnnotationPresent(RequestMapping.class))&#123;</span><br><span class="line">                        String anoPath = m.getAnnotation(RequestMapping.class).value();</span><br><span class="line">                        <span class="keyword">if</span>(anoPath!=<span class="keyword">null</span> &amp;&amp; !<span class="string">""</span>.equals(anoPath.trim()))&#123;</span><br><span class="line">                            <span class="keyword">if</span> (RequestMapingMap.getRequesetMap().containsKey(anoPath)) &#123;</span><br><span class="line">                                <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"RequestMapping映射的地址不允许重复！"</span>);</span><br><span class="line">                            &#125;</span><br><span class="line">                            RequestMapingMap.put(anoPath, clazz);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>简单说一下AnnotationHandleServlet的实现思路</p>
<ol>
<li>AnnotationHandleServlet初始化(init)时扫描指定的包下面使用了Controller注解的类，如下图所示：</li>
</ol>
<div align="center"><br><img src="data:image/png;base64,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"><br></div>

<ol>
<li>遍历类中的方法，找到类中使用了RequestMapping注解标注的那些方法，获取RequestMapping注解的value属性值，value属性值指明了该方法的访问路径，以RequestMapping注解的value属性值作为key，Class类作为value将存储到一个静态Map集合中。如下图所示：</li>
</ol>
<div align="center"><br><img src="data:image/png;base64,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"><br></div>

<p>当用户请求时(无论是get还是post请求)，会调用封装好的execute方法 ，execute会先获取请求的url，然后解析该URL，根据解析好的URL从Map集合中取出要调用的目标类 ，再遍历目标类中定义的所有方法，找到类中使用了RequestMapping注解的那些方法，判断方法上面的RequestMapping注解的value属性值是否和解析出来的URL路径一致,如果一致，说明了这个就是要调用的目标方法，此时就可以利用java反射机制先实例化目标类对象，然后再通过实例化对象调用要执行的方法处理用户请求。服务器将以下图的方式与客户端进行交互</p>
<div align="center"><br><img src="data:image/png;base64,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"><br></div>

<p>另外，方法处理完成之后需要给客户端发送响应信息，比如告诉客户端要跳转到哪一个页面，采用的是服务器端跳转还是客户端方式跳转，或者发送一些数据到客户端显示，那么该如何发送响应信息给客户端呢，在此，我们可以设计一个View(视图)类，对这些操作属性进行封装，其中包括跳转的路径 、展现到页面的数据、跳转方式。这就是AnnotationHandleServlet的实现思路。</p>
<h4 id="2-2-在Web-xml文件中注册AnnotationHandleServlet"><a href="#2-2-在Web-xml文件中注册AnnotationHandleServlet" class="headerlink" title="2.2 在Web.xml文件中注册AnnotationHandleServlet"></a>2.2 在Web.xml文件中注册AnnotationHandleServlet</h4><p>在web.xml文件中配置AnnotationHandleServlet和需要扫描的包</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;servlet&gt;</span><br><span class="line">    &lt;servlet-name&gt;AnnotationHandleServlet&lt;/servlet-name&gt;</span><br><span class="line">    &lt;servlet-<span class="class"><span class="keyword">class</span>&gt;<span class="title">me</span>.<span class="title">gacl</span>.<span class="title">web</span>.<span class="title">controller</span>.<span class="title">AnnotationHandleServlet</span>&lt;/<span class="title">servlet</span>-<span class="title">class</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;<span class="title">init</span>-<span class="title">param</span>&gt;</span></span><br><span class="line"><span class="class">         &lt;<span class="title">description</span>&gt;配置要扫描包及其子包, 如果有多个包,以逗号分隔&lt;/<span class="title">description</span>&gt;</span></span><br><span class="line"><span class="class">        &lt;<span class="title">param</span>-<span class="title">name</span>&gt;<span class="title">basePackage</span>&lt;/<span class="title">param</span>-<span class="title">name</span>&gt;</span></span><br><span class="line"><span class="class">        &lt;<span class="title">param</span>-<span class="title">value</span>&gt;<span class="title">me</span>.<span class="title">gacl</span>.<span class="title">web</span>.<span class="title">controller</span>,<span class="title">me</span>.<span class="title">gacl</span>.<span class="title">web</span>.<span class="title">UI</span>&lt;/<span class="title">param</span>-<span class="title">value</span>&gt;</span></span><br><span class="line"><span class="class">        &lt;!-- &lt;<span class="title">param</span>-<span class="title">value</span>&gt;<span class="title">me</span>.<span class="title">gacl</span>.<span class="title">web</span>.<span class="title">controller</span>&lt;/<span class="title">param</span>-<span class="title">value</span>&gt; --&gt;</span></span><br><span class="line"><span class="class">    &lt;/<span class="title">init</span>-<span class="title">param</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;<span class="title">load</span>-<span class="title">on</span>-<span class="title">startup</span>&gt;1&lt;/<span class="title">load</span>-<span class="title">on</span>-<span class="title">startup</span>&gt;</span></span><br><span class="line"><span class="class">  &lt;/<span class="title">servlet</span>&gt;</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">  &lt;<span class="title">servlet</span>-<span class="title">mapping</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;<span class="title">servlet</span>-<span class="title">name</span>&gt;<span class="title">AnnotationHandleServlet</span>&lt;/<span class="title">servlet</span>-<span class="title">name</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;!-- 拦截所有以.<span class="title">do</span>后缀结尾的请求 --&gt;</span></span><br><span class="line"><span class="class">    &lt;<span class="title">url</span>-<span class="title">pattern</span>&gt;*.<span class="title">do</span>&lt;/<span class="title">url</span>-<span class="title">pattern</span>&gt;</span></span><br><span class="line"><span class="class">  &lt;/<span class="title">servlet</span>-<span class="title">mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="三、相关代码讲解"><a href="#三、相关代码讲解" class="headerlink" title="三、相关代码讲解"></a>三、相关代码讲解</h3><h4 id="3-1-BeanUtils"><a href="#3-1-BeanUtils" class="headerlink" title="3.1 BeanUtils"></a>3.1 BeanUtils</h4><p>BeanUtils工具类主要是用来处理一些反射的操作</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> me.gacl.util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Constructor;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Field;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.InvocationTargetException;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Modifier;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 对java反射中操作的一些封装</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BeanUtils</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 实例化一个class </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &lt;T&gt;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> clazz Person.class</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function">T <span class="title">instanceClass</span><span class="params">(Class&lt;T&gt; clazz)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(!clazz.isInterface())&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> clazz.newInstance();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InstantiationException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IllegalAccessException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 通过构造函数实例化</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &lt;T&gt;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> ctor</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> args</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IllegalArgumentException</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> InstantiationException</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IllegalAccessException</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> InvocationTargetException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function">T <span class="title">instanceClass</span><span class="params">(Constructor&lt;T&gt; ctor, Object... args)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> IllegalArgumentException, InstantiationException, </span></span><br><span class="line"><span class="function">            IllegalAccessException, InvocationTargetException</span>&#123;</span><br><span class="line">        makeAccessible(ctor);</span><br><span class="line">        <span class="keyword">return</span> ctor.newInstance(args);<span class="comment">//调用构造方法实例化</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 查找某个class的方法</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> clazz</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> methodName</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> paramTypes</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> SecurityException</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> NoSuchMethodException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span>  Method <span class="title">findMethod</span><span class="params">(Class&lt;?&gt; clazz, String methodName, Class&lt;?&gt;... paramTypes)</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> clazz.getMethod(methodName, paramTypes);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (NoSuchMethodException e) &#123;</span><br><span class="line">            <span class="keyword">return</span> findDeclaredMethod(clazz, methodName, paramTypes);<span class="comment">//返回共有的方法</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Method <span class="title">findDeclaredMethod</span><span class="params">(Class&lt;?&gt; clazz, String methodName, Class&lt;?&gt;[] paramTypes)</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> clazz.getDeclaredMethod(methodName, paramTypes);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (NoSuchMethodException ex) &#123;</span><br><span class="line">            <span class="keyword">if</span> (clazz.getSuperclass() != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> findDeclaredMethod(clazz.getSuperclass(), methodName, paramTypes);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Method [] findDeclaredMethods(Class&lt;?&gt; clazz)&#123;</span><br><span class="line">            <span class="keyword">return</span> clazz.getDeclaredMethods();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">makeAccessible</span><span class="params">(Constructor&lt;?&gt; ctor)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> ((!Modifier.isPublic(ctor.getModifiers()) </span><br><span class="line">                || !Modifier.isPublic(ctor.getDeclaringClass().getModifiers()))</span><br><span class="line">                &amp;&amp; !ctor.isAccessible()) &#123;</span><br><span class="line">            ctor.setAccessible(<span class="keyword">true</span>);<span class="comment">//如果是私有的 设置为true 使其可以访问</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Field[] findDeclaredFields(Class&lt;?&gt; clazz)&#123;</span><br><span class="line">        <span class="keyword">return</span> clazz.getDeclaredFields();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="3-2-RequestMapingMap"><a href="#3-2-RequestMapingMap" class="headerlink" title="3.2 RequestMapingMap"></a>3.2 RequestMapingMap</h4><p>该类是用于存储方法的访问路径，AnnotationHandleServlet初始化时会将类(使用Controller注解标注的那些类)中使用了RequestMapping注解标注的那些方法的访问路径存储到RequestMapingMap中。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> me.gacl.util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* <span class="doctag">@ClassName</span>: RequestMapingMap</span></span><br><span class="line"><span class="comment">* <span class="doctag">@Description</span>: 存储方法的访问路径</span></span><br><span class="line"><span class="comment">* <span class="doctag">@author</span>: 孤傲苍狼</span></span><br><span class="line"><span class="comment">* <span class="doctag">@date</span>: 2014-11-16 下午6:31:43</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">*/</span> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RequestMapingMap</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Field</span>: requesetMap</span></span><br><span class="line"><span class="comment">    *          用于存储方法的访问路径</span></span><br><span class="line"><span class="comment">    */</span> </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Map&lt;String, Class&lt;?&gt;&gt; requesetMap = <span class="keyword">new</span> HashMap&lt;String, Class&lt;?&gt;&gt;();</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Class&lt;?&gt; getClassName(String path) &#123;</span><br><span class="line">        <span class="keyword">return</span> requesetMap.get(path);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">put</span><span class="params">(String path, Class&lt;?&gt; className)</span> </span>&#123;</span><br><span class="line">        requesetMap.put(path, className);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Map&lt;String, Class&lt;?&gt;&gt; getRequesetMap() &#123;</span><br><span class="line">        <span class="keyword">return</span> requesetMap;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="3-3-ScanClassUtil"><a href="#3-3-ScanClassUtil" class="headerlink" title="3.3. ScanClassUtil"></a>3.3. ScanClassUtil</h4><p>扫描某个包下面的类的工具类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> me.gacl.util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileFilter;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.net.JarURLConnection;</span><br><span class="line"><span class="keyword">import</span> java.net.URL;</span><br><span class="line"><span class="keyword">import</span> java.net.URLDecoder;</span><br><span class="line"><span class="keyword">import</span> java.util.Enumeration;</span><br><span class="line"><span class="keyword">import</span> java.util.LinkedHashSet;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"><span class="keyword">import</span> java.util.jar.JarEntry;</span><br><span class="line"><span class="keyword">import</span> java.util.jar.JarFile;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* <span class="doctag">@ClassName</span>: ScanClassUtil</span></span><br><span class="line"><span class="comment">* <span class="doctag">@Description</span>: 扫描指定包或者jar包下面的class</span></span><br><span class="line"><span class="comment">* <span class="doctag">@author</span>: 孤傲苍狼</span></span><br><span class="line"><span class="comment">* <span class="doctag">@date</span>: 2014-11-16 下午6:34:10</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">*/</span> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ScanClassUtil</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 从包package中获取所有的Class</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> pack</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Set&lt;Class&lt;?&gt;&gt; getClasses(String pack) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 第一个class类的集合</span></span><br><span class="line">        Set&lt;Class&lt;?&gt;&gt; classes = <span class="keyword">new</span> LinkedHashSet&lt;Class&lt;?&gt;&gt;();</span><br><span class="line">        <span class="comment">// 是否循环迭代</span></span><br><span class="line">        <span class="keyword">boolean</span> recursive = <span class="keyword">true</span>;</span><br><span class="line">        <span class="comment">// 获取包的名字 并进行替换</span></span><br><span class="line">        String packageName = pack;</span><br><span class="line">        String packageDirName = packageName.replace(<span class="string">'.'</span>, <span class="string">'/'</span>);</span><br><span class="line">        <span class="comment">// 定义一个枚举的集合 并进行循环来处理这个目录下的things</span></span><br><span class="line">        Enumeration&lt;URL&gt; dirs;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            dirs = Thread.currentThread().getContextClassLoader().getResources(</span><br><span class="line">                    packageDirName);</span><br><span class="line">            <span class="comment">// 循环迭代下去</span></span><br><span class="line">            <span class="keyword">while</span> (dirs.hasMoreElements()) &#123;</span><br><span class="line">                <span class="comment">// 获取下一个元素</span></span><br><span class="line">                URL url = dirs.nextElement();</span><br><span class="line">                <span class="comment">// 得到协议的名称</span></span><br><span class="line">                String protocol = url.getProtocol();</span><br><span class="line">                <span class="comment">// 如果是以文件的形式保存在服务器上</span></span><br><span class="line">                <span class="keyword">if</span> (<span class="string">"file"</span>.equals(protocol)) &#123;</span><br><span class="line">                    System.err.println(<span class="string">"file类型的扫描"</span>);</span><br><span class="line">                    <span class="comment">// 获取包的物理路径</span></span><br><span class="line">                    String filePath = URLDecoder.decode(url.getFile(), <span class="string">"UTF-8"</span>);</span><br><span class="line">                    <span class="comment">// 以文件的方式扫描整个包下的文件 并添加到集合中</span></span><br><span class="line">                    findAndAddClassesInPackageByFile(packageName, filePath,</span><br><span class="line">                            recursive, classes);</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">"jar"</span>.equals(protocol)) &#123;</span><br><span class="line">                    <span class="comment">// 如果是jar包文件</span></span><br><span class="line">                    <span class="comment">// 定义一个JarFile</span></span><br><span class="line">                    System.err.println(<span class="string">"jar类型的扫描"</span>);</span><br><span class="line">                    JarFile jar;</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        <span class="comment">// 获取jar</span></span><br><span class="line">                        jar = ((JarURLConnection) url.openConnection())</span><br><span class="line">                                .getJarFile();</span><br><span class="line">                        <span class="comment">// 从此jar包 得到一个枚举类</span></span><br><span class="line">                        Enumeration&lt;JarEntry&gt; entries = jar.entries();</span><br><span class="line">                        <span class="comment">// 同样的进行循环迭代</span></span><br><span class="line">                        <span class="keyword">while</span> (entries.hasMoreElements()) &#123;</span><br><span class="line">                            <span class="comment">// 获取jar里的一个实体 可以是目录 和一些jar包里的其他文件 如META-INF等文件</span></span><br><span class="line">                            JarEntry entry = entries.nextElement();</span><br><span class="line">                            String name = entry.getName();</span><br><span class="line">                            <span class="comment">// 如果是以/开头的</span></span><br><span class="line">                            <span class="keyword">if</span> (name.charAt(<span class="number">0</span>) == <span class="string">'/'</span>) &#123;</span><br><span class="line">                                <span class="comment">// 获取后面的字符串</span></span><br><span class="line">                                name = name.substring(<span class="number">1</span>);</span><br><span class="line">                            &#125;</span><br><span class="line">                            <span class="comment">// 如果前半部分和定义的包名相同</span></span><br><span class="line">                            <span class="keyword">if</span> (name.startsWith(packageDirName)) &#123;</span><br><span class="line">                                <span class="keyword">int</span> idx = name.lastIndexOf(<span class="string">'/'</span>);</span><br><span class="line">                                <span class="comment">// 如果以"/"结尾 是一个包</span></span><br><span class="line">                                <span class="keyword">if</span> (idx != -<span class="number">1</span>) &#123;</span><br><span class="line">                                    <span class="comment">// 获取包名 把"/"替换成"."</span></span><br><span class="line">                                    packageName = name.substring(<span class="number">0</span>, idx)</span><br><span class="line">                                            .replace(<span class="string">'/'</span>, <span class="string">'.'</span>);</span><br><span class="line">                                &#125;</span><br><span class="line">                                <span class="comment">// 如果可以迭代下去 并且是一个包</span></span><br><span class="line">                                <span class="keyword">if</span> ((idx != -<span class="number">1</span>) || recursive) &#123;</span><br><span class="line">                                    <span class="comment">// 如果是一个.class文件 而且不是目录</span></span><br><span class="line">                                    <span class="keyword">if</span> (name.endsWith(<span class="string">".class"</span>)</span><br><span class="line">                                            &amp;&amp; !entry.isDirectory()) &#123;</span><br><span class="line">                                        <span class="comment">// 去掉后面的".class" 获取真正的类名</span></span><br><span class="line">                                        String className = name.substring(</span><br><span class="line">                                                packageName.length() + <span class="number">1</span>, name</span><br><span class="line">                                                        .length() - <span class="number">6</span>);</span><br><span class="line">                                        <span class="keyword">try</span> &#123;</span><br><span class="line">                                            <span class="comment">// 添加到classes</span></span><br><span class="line">                                            classes.add(Class</span><br><span class="line">                                                    .forName(packageName + <span class="string">'.'</span></span><br><span class="line">                                                            + className));</span><br><span class="line">                                        &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">                                            <span class="comment">// log</span></span><br><span class="line">                                            <span class="comment">// .error("添加用户自定义视图类错误 找不到此类的.class文件");</span></span><br><span class="line">                                            e.printStackTrace();</span><br><span class="line">                                        &#125;</span><br><span class="line">                                    &#125;</span><br><span class="line">                                &#125;</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                        <span class="comment">// log.error("在扫描用户定义视图时从jar包获取文件出错");</span></span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> classes;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 以文件的形式来获取包下的所有Class</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> packageName</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> packagePath</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> recursive</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> classes</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">findAndAddClassesInPackageByFile</span><span class="params">(String packageName,</span></span></span><br><span class="line"><span class="function"><span class="params">            String packagePath, <span class="keyword">final</span> <span class="keyword">boolean</span> recursive, Set&lt;Class&lt;?&gt;&gt; classes)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 获取此包的目录 建立一个File</span></span><br><span class="line">        File dir = <span class="keyword">new</span> File(packagePath);</span><br><span class="line">        <span class="comment">// 如果不存在或者 也不是目录就直接返回</span></span><br><span class="line">        <span class="keyword">if</span> (!dir.exists() || !dir.isDirectory()) &#123;</span><br><span class="line">            <span class="comment">// log.warn("用户定义包名 " + packageName + " 下没有任何文件");</span></span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 如果存在 就获取包下的所有文件 包括目录</span></span><br><span class="line">        File[] dirfiles = dir.listFiles(<span class="keyword">new</span> FileFilter() &#123;</span><br><span class="line">            <span class="comment">// 自定义过滤规则 如果可以循环(包含子目录) 或则是以.class结尾的文件(编译好的java类文件)</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">accept</span><span class="params">(File file)</span> </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> (recursive &amp;&amp; file.isDirectory())</span><br><span class="line">                        || (file.getName().endsWith(<span class="string">".class"</span>));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="comment">// 循环所有文件</span></span><br><span class="line">        <span class="keyword">for</span> (File file : dirfiles) &#123;</span><br><span class="line">            <span class="comment">// 如果是目录 则继续扫描</span></span><br><span class="line">            <span class="keyword">if</span> (file.isDirectory()) &#123;</span><br><span class="line">                findAndAddClassesInPackageByFile(packageName + <span class="string">"."</span></span><br><span class="line">                        + file.getName(), file.getAbsolutePath(), recursive,</span><br><span class="line">                        classes);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">// 如果是java类文件 去掉后面的.class 只留下类名</span></span><br><span class="line">                String className = file.getName().substring(<span class="number">0</span>,</span><br><span class="line">                        file.getName().length() - <span class="number">6</span>);</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    <span class="comment">// 添加到集合中去</span></span><br><span class="line">                    <span class="comment">//classes.add(Class.forName(packageName + '.' + className));</span></span><br><span class="line">                     <span class="comment">//经过回复同学的提醒，这里用forName有一些不好，会触发static方法，没有使用classLoader的load干净</span></span><br><span class="line">                    classes.add(Thread.currentThread().getContextClassLoader().loadClass(packageName + <span class="string">'.'</span> + className));  </span><br><span class="line">                    &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">                    <span class="comment">// log.error("添加用户自定义视图类错误 找不到此类的.class文件");</span></span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="3-4-WebContext"><a href="#3-4-WebContext" class="headerlink" title="3.4 WebContext"></a>3.4 WebContext</h4><p>WebContext主要是用来存储当前线程中的HttpServletRequest和HttpServletResponse，当别的地方需要使用HttpServletRequest和HttpServletResponse，就可以通过requestHodler和responseHodler获取，通过WebContext.java这个类 ，我们可以在作为Controller的普通java类中获取当前请求的request、response或者session相关请求类的实例变量，并且线程间互不干扰的，因为用到了ThreadLocal这个类。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> me.gacl.web.context;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletContext;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * WebContext主要是用来存储当前线程中的HttpServletRequest和HttpServletResponse</span></span><br><span class="line"><span class="comment"> * 当别的地方需要使用HttpServletRequest和HttpServletResponse，就可以通过requestHodler和responseHodler获取</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WebContext</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> ThreadLocal&lt;HttpServletRequest&gt; requestHodler = <span class="keyword">new</span> ThreadLocal&lt;HttpServletRequest&gt;();</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> ThreadLocal&lt;HttpServletResponse&gt; responseHodler = <span class="keyword">new</span> ThreadLocal&lt;HttpServletResponse&gt;();</span><br><span class="line">   </span><br><span class="line">    <span class="function"><span class="keyword">public</span> HttpServletRequest <span class="title">getRequest</span><span class="params">()</span></span>&#123;</span><br><span class="line">           <span class="keyword">return</span> requestHodler.get();</span><br><span class="line">    &#125;</span><br><span class="line">   </span><br><span class="line">    <span class="function"><span class="keyword">public</span> HttpSession <span class="title">getSession</span><span class="params">()</span></span>&#123;</span><br><span class="line">           <span class="keyword">return</span> requestHodler.get().getSession();</span><br><span class="line">    &#125;</span><br><span class="line">   </span><br><span class="line">    <span class="function"><span class="keyword">public</span> ServletContext <span class="title">getServletContext</span><span class="params">()</span></span>&#123;</span><br><span class="line">           <span class="keyword">return</span> requestHodler.get().getSession().getServletContext();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> HttpServletResponse <span class="title">getResponse</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> responseHodler.get();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="3-5-View"><a href="#3-5-View" class="headerlink" title="3.5 View"></a>3.5 View</h4><p>一个视图类，对一些客户端响应操作进行封装，其中包括跳转的路径 、展现到页面的数据、跳转方式</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> me.gacl.web.view;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 视图模型</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">View</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String url;<span class="comment">//跳转路径</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> String dispathAction = DispatchActionConstant.FORWARD;<span class="comment">//跳转方式</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">View</span><span class="params">(String url)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.url = url;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">View</span><span class="params">(String url,String name,Object value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.url = url;</span><br><span class="line">        ViewData view = <span class="keyword">new</span> ViewData();</span><br><span class="line">        view.put(name, value);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">View</span><span class="params">(String url,String name,String dispathAction ,Object value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.dispathAction = dispathAction;</span><br><span class="line">        <span class="keyword">this</span>.url = url;</span><br><span class="line">        ViewData view = <span class="keyword">new</span> ViewData();<span class="comment">//请看后面的代码</span></span><br><span class="line">        view.put(name, value);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getUrl</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> url;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUrl</span><span class="params">(String url)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.url = url;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getDispathAction</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> dispathAction;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setDispathAction</span><span class="params">(String dispathAction)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.dispathAction = dispathAction;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="3-6-ViewData"><a href="#3-6-ViewData" class="headerlink" title="3.6 ViewData"></a>3.6 ViewData</h4><p>request范围的数据存储类，当需要发送数据到客户端显示时，就可以将要显示的数据存储到ViewData类中。使用ViewData.put(String name,Object value)方法往request对象中存数据。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> me.gacl.web.view;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> me.gacl.web.context.WebContext;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 需要发送到客户端显示的数据模型</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ViewData</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> HttpServletRequest request;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ViewData</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        initRequest();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">initRequest</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//从requestHodler中获取request对象</span></span><br><span class="line">        <span class="keyword">this</span>.request = WebContext.requestHodler.get();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">put</span><span class="params">(String name,Object value)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.request.setAttribute(name, value);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="3-7-DispatchActionConstant"><a href="#3-7-DispatchActionConstant" class="headerlink" title="3.7 DispatchActionConstant"></a>3.7 DispatchActionConstant</h4><p>一个跳转方式的常量类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> me.gacl.web.view;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 跳转常量</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DispatchActionConstant</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String FORWARD = <span class="string">"forward"</span>;<span class="comment">//服务器跳转</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String REDIRECT = <span class="string">"redirect"</span>;<span class="comment">//客户端跳转</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="四、Controller注解和RequestMapping注解测试"><a href="#四、Controller注解和RequestMapping注解测试" class="headerlink" title="四、Controller注解和RequestMapping注解测试"></a>四、Controller注解和RequestMapping注解测试</h3><h4 id="4-1-简单测试"><a href="#4-1-简单测试" class="headerlink" title="4.1 简单测试"></a>4.1 简单测试</h4><p>编写一个LoginUI类，用于跳转到具体的jsp页面，代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> me.gacl.web.UI;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> me.gacl.annotation.Controller;</span><br><span class="line"><span class="keyword">import</span> me.gacl.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> me.gacl.web.view.View;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 使用Controller注解标注LoginUI类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginUI</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//使用RequestMapping注解指明forward1方法的访问路径  </span></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"LoginUI/Login2"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> View <span class="title">forward1</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//执行完forward1方法之后返回的视图</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> View(<span class="string">"/login2.jsp"</span>);  </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//使用RequestMapping注解指明forward2方法的访问路径  </span></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"LoginUI/Login3"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> View <span class="title">forward2</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//执行完forward2方法之后返回的视图</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> View(<span class="string">"/login3.jsp"</span>);  </span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果如下</p>
<div align="center"><br><img src="https://mmbiz.qpic.cn/mmbiz_gif/sG1icpcmhbiaDsj6QpGG16SVyh9JVX054wSHXUZIY5GKiaU44tBQjb74JzdDibUywjj0kxticOTKAM9siaWScI5aH8rQ/640?tp=webp&wxfrom=5&wx_lazy=1"><br></div>

<h4 id="4-2-复杂测试"><a href="#4-2-复杂测试" class="headerlink" title="4.2 复杂测试"></a>4.2 复杂测试</h4><p>编写用于处理用户登录请求的Controller，代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> me.gacl.web.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> me.gacl.annotation.Controller;</span><br><span class="line"><span class="keyword">import</span> me.gacl.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> me.gacl.web.context.WebContext;</span><br><span class="line"><span class="keyword">import</span> me.gacl.web.view.View;</span><br><span class="line"><span class="keyword">import</span> me.gacl.web.view.ViewData;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* </span></span><br><span class="line"><span class="comment">* <span class="doctag">@ClassName</span>: LoginServlet2</span></span><br><span class="line"><span class="comment">* <span class="doctag">@Description</span>:处理用户登录的Servlet，</span></span><br><span class="line"><span class="comment">* LoginServlet现在就是一个普通的java类，不是一个真正的Servlet</span></span><br><span class="line"><span class="comment">* <span class="doctag">@author</span>: 孤傲苍狼</span></span><br><span class="line"><span class="comment">* <span class="doctag">@date</span>: 2014-10-8 上午12:07:58</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@Controller</span> <span class="comment">//使用Controller注解标注LoginServlet2</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginServlet2</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Method</span>: loginHandle</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Description</span>:处理以普通方式提交的请求</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Anthor</span>:孤傲苍狼</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@return</span> View</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="comment">//使用RequestMapping注解标注loginHandle方法，指明loginHandle方法的访问路径是login/handle</span></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"login/handle"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> View <span class="title">loginHandle</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//创建一个ViewData对象，用于存储需要发送到客户端的响应数据</span></span><br><span class="line">        ViewData viewData = <span class="keyword">new</span> ViewData();</span><br><span class="line">        <span class="comment">//通过WebContext类获取当前线程中的HttpServletRequest对象</span></span><br><span class="line">        HttpServletRequest request = WebContext.requestHodler.get();</span><br><span class="line">        <span class="comment">//接收提交上来的参数</span></span><br><span class="line">        String username =request.getParameter(<span class="string">"usename"</span>);</span><br><span class="line">        String pwd = request.getParameter(<span class="string">"pwd"</span>);</span><br><span class="line">        <span class="keyword">if</span> (username.equals(<span class="string">"gacl"</span>) &amp;&amp; pwd.equals(<span class="string">"xdp"</span>)) &#123;</span><br><span class="line">            request.getSession().setAttribute(<span class="string">"usename"</span>, username);</span><br><span class="line">            <span class="comment">//将响应数据存储到ViewData对象中</span></span><br><span class="line">            viewData.put(<span class="string">"msg"</span>, <span class="string">"欢迎您！"</span>+username);</span><br><span class="line">            <span class="comment">//返回一个View对象，指明要跳转的视图的路径</span></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> View(<span class="string">"/index.jsp"</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">//将响应数据存储到ViewData对象中</span></span><br><span class="line">            viewData.put(<span class="string">"msg"</span>, <span class="string">"登录失败，请检查用户名和密码是否正确！"</span>);</span><br><span class="line">            <span class="comment">//返回一个View对象，指明要跳转的视图的路径</span></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> View(<span class="string">"/login2.jsp"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Method</span>: ajaxLoginHandle</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Description</span>: 处理以AJAX方式提交的请求</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Anthor</span>:孤傲苍狼</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">    */</span> </span><br><span class="line">    <span class="comment">//使用RequestMapping注解标注ajaxLoginHandle方法，指明ajaxLoginHandle方法的访问路径是ajaxLogin/handle</span></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"ajaxLogin/handle"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">ajaxLoginHandle</span><span class="params">()</span> <span class="keyword">throws</span> IOException</span>&#123;</span><br><span class="line">        <span class="comment">//通过WebContext类获取当前线程中的HttpServletRequest对象</span></span><br><span class="line">        HttpServletRequest request = WebContext.requestHodler.get();</span><br><span class="line">        <span class="comment">//接收提交上来的参数</span></span><br><span class="line">        String username =request.getParameter(<span class="string">"usename"</span>);</span><br><span class="line">        String pwd = request.getParameter(<span class="string">"pwd"</span>);</span><br><span class="line">        <span class="comment">//通过WebContext类获取当前线程中的HttpServletResponse对象</span></span><br><span class="line">        HttpServletResponse response = WebContext.responseHodler.get();</span><br><span class="line">        <span class="keyword">if</span> (username.equals(<span class="string">"gacl"</span>) &amp;&amp; pwd.equals(<span class="string">"xdp"</span>)) &#123;</span><br><span class="line">            request.getSession().setAttribute(<span class="string">"usename"</span>, username);</span><br><span class="line">            response.getWriter().write(<span class="string">"success"</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            response.getWriter().write(<span class="string">"fail"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>编写用于测试的jsp页面，代码如下所示：</p>
<p>Login2.jsp登录页面<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">"java"</span> pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE HTML&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;title&gt;login2.jsp登录页面&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  </span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;fieldset&gt;</span><br><span class="line">        &lt;legend&gt;用户登录&lt;/legend&gt;</span><br><span class="line">        &lt;form action=<span class="string">"$&#123;pageContext.request.contextPath&#125;/login/handle.do"</span> method=<span class="string">"post"</span>&gt;</span><br><span class="line">            用户名：&lt;input type=<span class="string">"text"</span> value=<span class="string">"$&#123;param.usename&#125;"</span> name=<span class="string">"usename"</span>&gt;</span><br><span class="line">            &lt;br/&gt;</span><br><span class="line">            密码：&lt;input type=<span class="string">"text"</span> value=<span class="string">"$&#123;param.pwd&#125;"</span> name=<span class="string">"pwd"</span>&gt;</span><br><span class="line">            &lt;br/&gt;</span><br><span class="line">            &lt;input type=<span class="string">"submit"</span> value=<span class="string">"登录"</span>/&gt;</span><br><span class="line">        &lt;/form&gt;</span><br><span class="line">    &lt;/fieldset&gt;</span><br><span class="line">    &lt;hr/&gt;</span><br><span class="line">    &lt;label style="color: red;"&gt;$&#123;msg&#125;&lt;/label&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p>
<p>login3.jsp登录页面<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">"java"</span> pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE HTML&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;title&gt;login3登录页面&lt;/title&gt;</span><br><span class="line">    &lt;script type="text/javascript" src="$&#123;pageContext.request.contextPath&#125;/ajaxUtil.js"&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script type="text/javascript" src="$&#123;pageContext.request.contextPath&#125;/js/Utils.js"&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script type=<span class="string">"text/javascript"</span>&gt;</span><br><span class="line">    </span><br><span class="line">        <span class="function">function <span class="title">login</span><span class="params">()</span></span>&#123;</span><br><span class="line">             Ajax.request(&#123;</span><br><span class="line">                 url : <span class="string">"$&#123;pageContext.request.contextPath&#125;/ajaxLogin/handle.do"</span>,</span><br><span class="line">                 data : &#123;</span><br><span class="line">                     <span class="string">"usename"</span> : document.getElementById(<span class="string">"usename"</span>).value,</span><br><span class="line">                     <span class="string">"pwd"</span> : document.getElementById(<span class="string">"pwd"</span>).value</span><br><span class="line">                 &#125;,</span><br><span class="line">                 success : function(xhr) &#123;</span><br><span class="line">                     onData(xhr.responseText);</span><br><span class="line">                 &#125;,</span><br><span class="line">                 error : function(xhr) &#123;</span><br><span class="line">                     </span><br><span class="line">                 &#125;</span><br><span class="line">             &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="function">function <span class="title">onData</span><span class="params">(responseText)</span></span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(responseText==<span class="string">"success"</span>)&#123;</span><br><span class="line">                <span class="comment">//window.location.href="index.jsp";//改变url地址</span></span><br><span class="line">                <span class="comment">/*</span></span><br><span class="line"><span class="comment">                window.location.replace("url")：将地址替换成新url，</span></span><br><span class="line"><span class="comment">                该方法通过指定URL替换当前缓存在历史里（客户端）的项目，因此当使用replace方法之后，</span></span><br><span class="line"><span class="comment">                你不能通过“前进”和“后 退”来访问已经被替换的URL，这个特点对于做一些过渡页面非常有用！</span></span><br><span class="line"><span class="comment">                */</span></span><br><span class="line">                location.replace(g_basePath+<span class="string">"/index.jsp"</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                alert(<span class="string">"用户名和密码错误"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  </span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;fieldset&gt;</span><br><span class="line">        &lt;legend&gt;用户登录&lt;/legend&gt;</span><br><span class="line">        &lt;form&gt;</span><br><span class="line">            用户名：&lt;input type=<span class="string">"text"</span> name=<span class="string">"usename"</span> id=<span class="string">"usename"</span>&gt;</span><br><span class="line">            &lt;br/&gt;</span><br><span class="line">            密码：&lt;input type=<span class="string">"text"</span> name=<span class="string">"pwd"</span> id=<span class="string">"pwd"</span>&gt;</span><br><span class="line">            &lt;br/&gt;</span><br><span class="line">            &lt;input type=<span class="string">"button"</span> value=<span class="string">"登录"</span> onclick=<span class="string">"login()"</span>/&gt;</span><br><span class="line">        &lt;/form&gt;</span><br><span class="line">    &lt;/fieldset&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p>
<p>index.jsp页面代码如下：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">"java"</span> <span class="keyword">import</span>=<span class="string">"java.util.*"</span> pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><br><span class="line"></span><br><span class="line">&lt;!DOCTYPE HTML&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;title&gt;首页&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  </span><br><span class="line">  &lt;body&gt;</span><br><span class="line">        登录的用户名：$&#123;usename&#125;</span><br><span class="line">    &lt;br/&gt;</span><br><span class="line">    $&#123;msg&#125;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p>
<p>jsp页面中使用到的Utils.js代码如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//立即执行的js</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//获取contextPath</span></span><br><span class="line">    <span class="keyword">var</span> contextPath = getContextPath();</span><br><span class="line">    <span class="comment">//获取basePath</span></span><br><span class="line">    <span class="keyword">var</span> basePath = getBasePath();</span><br><span class="line">    <span class="comment">//将获取到contextPath和basePath分别赋值给window对象的g_contextPath属性和g_basePath属性</span></span><br><span class="line">    <span class="built_in">window</span>.g_contextPath = contextPath;</span><br><span class="line">    <span class="built_in">window</span>.g_basePath = basePath;</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @author 孤傲苍狼</span></span><br><span class="line"><span class="comment"> * 获得项目根路径，等价于jsp页面中</span></span><br><span class="line"><span class="comment"> *  &lt;%</span></span><br><span class="line"><span class="comment">        String basePath = request.getScheme()+"://"+request.getServerName()+":"+request.getServerPort()+path+"/";</span></span><br><span class="line"><span class="comment">    %&gt;</span></span><br><span class="line"><span class="comment"> * 使用方法：getBasePath();</span></span><br><span class="line"><span class="comment"> * @returns 项目的根路径</span></span><br><span class="line"><span class="comment"> *  </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getBasePath</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> curWwwPath = <span class="built_in">window</span>.document.location.href;</span><br><span class="line">    <span class="keyword">var</span> pathName = <span class="built_in">window</span>.document.location.pathname;</span><br><span class="line">    <span class="keyword">var</span> pos = curWwwPath.indexOf(pathName);</span><br><span class="line">    <span class="keyword">var</span> localhostPath = curWwwPath.substring(<span class="number">0</span>, pos);</span><br><span class="line">    <span class="keyword">var</span> projectName = pathName.substring(<span class="number">0</span>, pathName.substr(<span class="number">1</span>).indexOf(<span class="string">'/'</span>) + <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">return</span> (localhostPath + projectName);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @author 孤傲苍狼</span></span><br><span class="line"><span class="comment"> * 获取Web应用的contextPath，等价于jsp页面中</span></span><br><span class="line"><span class="comment"> *  &lt;%</span></span><br><span class="line"><span class="comment">        String path = request.getContextPath();</span></span><br><span class="line"><span class="comment">    %&gt;</span></span><br><span class="line"><span class="comment"> * 使用方法:getContextPath();</span></span><br><span class="line"><span class="comment"> * @returns /项目名称(/EasyUIStudy_20141104)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getContextPath</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">window</span>.document.location.pathname.substring(<span class="number">0</span>, <span class="built_in">window</span>.document.location.pathname.indexOf(<span class="string">'\/'</span>, <span class="number">1</span>));</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>测试结果如下：</p>
<div align="center"><br><img src="https://mmbiz.qpic.cn/mmbiz_gif/sG1icpcmhbiaDsj6QpGG16SVyh9JVX054wib4XmDXIZOrUOOSsv9r078XdTDnxGAcOkJNX81r0A6304Hm3rhJpdpg/640?tp=webp&wxfrom=5&wx_lazy=1"><br></div>

<div align="center"><br><img src="https://mmbiz.qpic.cn/mmbiz_gif/sG1icpcmhbiaDsj6QpGG16SVyh9JVX054wKZwAYHuZzvXeTBHMsHPibhlkYxJNEib0GUgzpeoWjdhUMMF91MTH2CpQ/640?tp=webp&wxfrom=5&wx_lazy=1"><br></div>

<p>以上就是对Spring MVC的简单模拟。</p>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">Monad Kai</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="../../../../onlookerliu.github.io/2018/03/26/Simple-Implement-of-Spring-MVC/">onlookerliu.github.io/2018/03/26/Simple-Implement-of-Spring-MVC/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="onlookerliu.github.io" target="_blank">Code@浮生记</a>！</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="../../../../tags/Java/">Java</a></div><div class="post-qr-code"><div class="post-qr-code-item"><img class="post-qr-code__img" src="http://oxyywddt8.bkt.clouddn.com/qrcode/ali-qrcode.jpg"><div class="post-qr-code__desc">支付宝打赏</div></div><div class="post-qr-code-item"><img class="post-qr-code__img" src="http://oxyywddt8.bkt.clouddn.com/qrcode/Wechat.jpeg"><div class="post-qr-code__desc">微信打赏</div></div></div><div class="addthis_inline_share_toolbox pull-right"></div><script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=undefined" async></script><nav id="pagination"><div class="prev-post pull-left"><a href="../../29/Project-Euler-020/"><i class="fa fa-chevron-left">  </i><span>Project-Euler-020</span></a></div><div class="next-post pull-right"><a href="../../25/LeetCode-Notes-020/"><span>LeetCode Notes 020</span><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2017 - 2018 By Monad Kai</div><div class="framework-info"><span>驱动 - </span><a href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="busuanzi"><script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file-o"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="../../../../js/third-party/anime.min.js"></script><script src="../../../../js/third-party/jquery.min.js"></script><script src="../../../../js/third-party/jquery.fancybox.min.js"></script><script src="../../../../js/third-party/velocity.min.js"></script><script src="../../../../js/third-party/velocity.ui.min.js"></script><script src="../../../../js/utils.js?version=1.5.3"></script><script src="../../../../js/fancybox.js?version=1.5.3"></script><script src="../../../../js/sidebar.js?version=1.5.3"></script><script src="../../../../js/copy.js?version=1.5.3"></script><script src="../../../../js/fireworks.js?version=1.5.3"></script><script src="../../../../js/transition.js?version=1.5.3"></script><script src="../../../../js/scroll.js?version=1.5.3"></script><script src="../../../../js/head.js?version=1.5.3"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
    processEscapes: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
  }
});
</script><script type="text/x-mathjax-config">MathJax.Hub.Queue(function() {
  var all = MathJax.Hub.getAllJax(), i;
  for (i=0; i < all.length; i += 1) {
    all[i].SourceElement().parentNode.className += ' has-jax';
  }
});
</script><script src="https://cdn.bootcss.com/mathjax/2.7.2/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script></body></html>